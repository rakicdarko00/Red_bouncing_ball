#!/usr/bin/env python

from PIL import Image
from sys import argv
sprite_name = argv[1] if len(argv) > 1 else input("file name: ")
sprite = Image.open(sprite_name)


def chunks(list, chunk_size):
    for i in range(0, len(list), chunk_size):
        yield list[i: (chunk_size + i)]


def colorMap(rgb):
    rgb = (rgb[2], rgb[1], rgb[0])
    pallette = {
        # Redosled boja: B G R
		(0x00, 0x00, 0x00): "00"
		(0xED, 0x1C, 0x24): "01"
		(0x7F, 0x7F, 0x7F): "02"
		(0x7B, 0x7B, 0x7B): "03"
		(0xB8, 0xB8, 0xB8): "04"
		(0x60, 0x60, 0x60): "05"
		(0x55, 0x55, 0x55): "06"
		(0xE3, 0xE3, 0xE3): "07"
		(0xFF, 0xFF, 0xFF): "08"
		(0xCF, 0xCF, 0xCF): "09"
		(0xAE, 0xAE, 0xAE): "0A"
		(0x91, 0x91, 0x91): "0B"
		(0x5D, 0x5D, 0x5D): "0C"
		(0xE7, 0xE7, 0xE7): "0D"
		(0xD0, 0xD0, 0xD0): "0E"
		(0x9B, 0x9B, 0x9B): "0F"
		(0xF7, 0xF7, 0xF7): "10"
		(0x83, 0x83, 0x83): "11"
		(0xC5, 0xC5, 0xC5): "12"
		(0xB1, 0xB1, 0xB1): "13"
		(0x80, 0x80, 0x80): "14"
		(0xE0, 0xE0, 0xE0): "15"
		(0x6C, 0x6C, 0x6C): "16"
		(0xA2, 0xA2, 0xA2): "17"
		(0xF2, 0xF2, 0xF2): "18"
		(0xE5, 0xE5, 0xE5): "19"
		(0x69, 0x69, 0x69): "1A"
		(0xBA, 0xBA, 0xBA): "1B"
		(0xFE, 0xFE, 0xFE): "1C"
		(0xAC, 0xAC, 0xAC): "1D"
		(0x58, 0x58, 0x58): "1E"
		(0x86, 0x86, 0x86): "1F"
		(0xCB, 0xCB, 0xCB): "20"
		(0xFB, 0xFB, 0xFB): "21"
		(0xBF, 0xBF, 0xBF): "22"
		(0x77, 0x77, 0x77): "23"
		(0x57, 0x57, 0x57): "24"
		(0xD7, 0xD7, 0xD7): "25"
		(0xCD, 0xCD, 0xCD): "26"
		(0x8F, 0x8F, 0x8F): "27"
		(0x70, 0x70, 0x70): "28"
		(0xA1, 0xA1, 0xA1): "29"
		(0x64, 0x64, 0x64): "2A"
		(0xDD, 0xDD, 0xDD): "2B"
		(0xAF, 0xAF, 0xAF): "2C"
		(0x79, 0x79, 0x79): "2D"
		(0x5F, 0x5F, 0x5F): "2E"
		(0x93, 0x93, 0x93): "2F"
		(0xC1, 0xC1, 0xC1): "30"
		(0xE8, 0xE8, 0xE8): "31"
		(0xE2, 0xE2, 0xE2): "32"
		(0xB9, 0xB9, 0xB9): "33"
		(0x8A, 0x8A, 0x8A): "34"
		(0x56, 0x56, 0x56): "35"
		(0x71, 0x71, 0x71): "36"
		(0x9F, 0x9F, 0x9F): "37"
		(0xC8, 0xC8, 0xC8): "38"
		(0xEA, 0xEA, 0xEA): "39"
		(0xE4, 0xE4, 0xE4): "3A"
		(0xC0, 0xC0, 0xC0): "3B"
		(0x97, 0x97, 0x97): "3C"
		(0x68, 0x68, 0x68): "3D"
		(0xB9, 0x7A, 0x57): "3E"
		(0xFF, 0xF2, 0x00): "3F"
		(0xFF, 0xAE, 0xC9): "40"
		(0x22, 0xB1, 0x4C): "41"
		(0xC3, 0xC3, 0xC3): "42"


    }
    if rgb in pallette:
        return pallette[rgb]
    else:
        return "??"  # Nepostojeca boja - mora biti nesto iz palete


num = int(input("Pocetni indeks: "))
output = []
for y in range(sprite.size[1]):
    row = [sprite.getpixel((x, y)) for x in range(sprite.size[0])]
    row = [colorMap(rgb) for rgb in row]
    for line in ["".join(chunk) for chunk in chunks(row, 4)]:
        print(repr(num) + " => x\"" + line + "\",",)
        num += 1
